[gd_scene format=4 uid="uid://b23dqa27g72lc"]

[ext_resource type="Script" uid="uid://cj5d2ojwf120w" path="res://scripts/world.gd" id="1_uacia"]
[ext_resource type="PackedScene" uid="uid://div8vq63kmxi2" path="res://scenes/ground.tscn" id="2_yk7ts"]
[ext_resource type="Shader" uid="uid://clnrt0pq7h8pv" path="res://shaders/stack.gdshader" id="3_ajshl"]
[ext_resource type="Texture2D" uid="uid://d35yc0g2qmcqp" path="res://assets/tileset.png" id="4_ghpyy"]
[ext_resource type="PackedScene" uid="uid://dvme3l5h34ek8" path="res://scenes/player.tscn" id="5_44saj"]
[ext_resource type="Script" uid="uid://cp4he6iltnikf" path="res://scripts/camera_2d.gd" id="6_7mbro"]
[ext_resource type="Shader" uid="uid://d2ylumtkiha58" path="res://shaders/bg.gdshader" id="7_7mbro"]
[ext_resource type="Shader" uid="uid://76ukmvvd1w38" path="res://shaders/game.gdshader" id="7_ajshl"]
[ext_resource type="PackedScene" uid="uid://dcuwdh4sjhmrg" path="res://scenes/boundary.tscn" id="7_ff6ho"]
[ext_resource type="Texture2D" uid="uid://btfq1vy5r6277" path="res://assets/shard.png" id="8_7yos8"]
[ext_resource type="Shader" uid="uid://c3ph35v824blm" path="res://shaders/canvas_outline.gdshader" id="9_5jxlq"]
[ext_resource type="PackedScene" uid="uid://ce20buacdi0b2" path="res://scenes/health_station.tscn" id="10_yk7ts"]
[ext_resource type="PackedScene" uid="uid://rwqhbr7lvce" path="res://scenes/prism.tscn" id="12_44saj"]
[ext_resource type="PackedScene" uid="uid://bswyflpt80rbh" path="res://scenes/music_controller.tscn" id="13_44saj"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qxy0u"]
shader = ExtResource("3_ajshl")
shader_parameter/outline_color = Color(18.000122, 0, 0, 1)
shader_parameter/outline_thickness = 3.000000095
shader_parameter/outline_offset = Vector2(0, 0)
shader_parameter/SCREEN_SIZE = Vector2(640, 480)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_kvuet"]
texture = ExtResource("4_ghpyy")
0:0/0 = 0
0:0/0/terrain_set = 0
0:0/0/terrain = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-3.507245, -4.586397, 8, -2.7878103, 8, 8, -0.8093643, 8)
0:0/0/terrains_peering_bit/right_side = 0
0:0/0/terrains_peering_bit/bottom_right_corner = 0
0:0/0/terrains_peering_bit/bottom_side = 0
1:0/0 = 0
1:0/0/terrain_set = 0
1:0/0/terrain = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -1.7086582, 8, -1.1690817, 8, 8, -8, 8)
1:0/0/terrains_peering_bit/right_side = 0
1:0/0/terrains_peering_bit/bottom_right_corner = 0
1:0/0/terrains_peering_bit/bottom_side = 0
1:0/0/terrains_peering_bit/bottom_left_corner = 0
1:0/0/terrains_peering_bit/left_side = 0
2:0/0 = 0
2:0/0/terrain_set = 0
2:0/0/terrain = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -1.7086582, 0.9892225, -3.8669624, 2.6079512, 8, -8, 8)
2:0/0/terrains_peering_bit/bottom_side = 0
2:0/0/terrains_peering_bit/bottom_left_corner = 0
2:0/0/terrains_peering_bit/left_side = 0
0:1/0 = 0
0:1/0/terrain_set = 0
0:1/0/terrain = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-2.9676695, -8, 8, -8, 8, 8, 0.2697878, 8)
0:1/0/terrains_peering_bit/right_side = 0
0:1/0/terrains_peering_bit/bottom_right_corner = 0
0:1/0/terrains_peering_bit/bottom_side = 0
0:1/0/terrains_peering_bit/top_side = 0
0:1/0/terrains_peering_bit/top_right_corner = 0
1:1/0 = 0
1:1/0/terrain_set = 0
1:1/0/terrain = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:1/0/terrains_peering_bit/right_side = 0
1:1/0/terrains_peering_bit/bottom_right_corner = 0
1:1/0/terrains_peering_bit/bottom_side = 0
1:1/0/terrains_peering_bit/bottom_left_corner = 0
1:1/0/terrains_peering_bit/left_side = 0
1:1/0/terrains_peering_bit/top_left_corner = 0
1:1/0/terrains_peering_bit/top_side = 0
1:1/0/terrains_peering_bit/top_right_corner = 0
2:1/0 = 0
2:1/0/terrain_set = 0
2:1/0/terrain = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 1.7086582, -8, 2.6079512, 8, -8, 8)
2:1/0/terrains_peering_bit/bottom_side = 0
2:1/0/terrains_peering_bit/bottom_left_corner = 0
2:1/0/terrains_peering_bit/left_side = 0
2:1/0/terrains_peering_bit/top_left_corner = 0
2:1/0/terrains_peering_bit/top_side = 0
0:2/0 = 0
0:2/0/terrain_set = 0
0:2/0/terrain = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-2.9676695, -8, 8, -8, 8, 8, 0.2697878, 8)
0:2/0/terrains_peering_bit/right_side = 0
0:2/0/terrains_peering_bit/top_side = 0
0:2/0/terrains_peering_bit/top_right_corner = 0
1:2/0 = 0
1:2/0/terrain_set = 0
1:2/0/terrain = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 2.0683756, -8, 3.507246)
1:2/0/terrains_peering_bit/right_side = 0
1:2/0/terrains_peering_bit/left_side = 0
1:2/0/terrains_peering_bit/top_left_corner = 0
1:2/0/terrains_peering_bit/top_side = 0
1:2/0/terrains_peering_bit/top_right_corner = 0
2:2/0 = 0
2:2/0/terrain_set = 0
2:2/0/terrain = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 1.7086582, -8, 4.7662554, 6.205126, -8, 1.1690817)
2:2/0/terrains_peering_bit/left_side = 0
2:2/0/terrains_peering_bit/top_left_corner = 0
2:2/0/terrains_peering_bit/top_side = 0
3:0/next_alternative_id = 2
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)

[sub_resource type="TileSet" id="TileSet_u5sy4"]
physics_layer_0/collision_layer = 4
physics_layer_0/collision_mask = 4
terrain_set_0/mode = 0
terrain_set_0/terrain_0/name = "Terrain 0"
terrain_set_0/terrain_0/color = Color(0.73042506, 0, 0.11251018, 1)
sources/3 = SubResource("TileSetAtlasSource_kvuet")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ff6ho"]
shader = ExtResource("7_7mbro")
shader_parameter/stripes = 10.0
shader_parameter/stripe_thickness = 1.33
shader_parameter/stripe_color = Color(0.59, 0.98, 0.69, 1)
shader_parameter/background_color = Color(0, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ghpyy"]
shader = ExtResource("7_ajshl")
shader_parameter/SCREEN_SIZE = Vector2(0, 0)
shader_parameter/darkness = 0.0
shader_parameter/danger = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_excbq"]
shader = ExtResource("9_5jxlq")
shader_parameter/chroma_color = Color(0.3019608, 0.3019608, 0.3019608, 1)
shader_parameter/outline_color = Color(0.8862745, 0, 0, 1)
shader_parameter/outline_thickness = 1.0
shader_parameter/outline_offset = Vector2(0, 0)
shader_parameter/SCREEN_SIZE = Vector2(640, 480)

[sub_resource type="ViewportTexture" id="ViewportTexture_ir15t"]
viewport_path = NodePath("SubViewport")

[node name="World" type="Node2D" unique_id=377872557]
script = ExtResource("1_uacia")

[node name="Ground" parent="." unique_id=603078434 instance=ExtResource("2_yk7ts")]

[node name="TileMapLayer" type="TileMapLayer" parent="Ground" unique_id=1946488392]
material = SubResource("ShaderMaterial_qxy0u")
rotation = -0.010942351
tile_map_data = PackedByteArray("AAD/////AwAAAAEAAAAAAP//AwABAAEAAAABAP//AwABAAEAAAABAAAAAwABAAEAAAAAAAAAAwABAAEAAAAAAAEAAwABAAEAAAD//wEAAwABAAEAAAD//wAAAwABAAEAAAD///7/AwABAAEAAAAAAAIAAwABAAIAAAD//wIAAwABAAIAAAABAP7/AwABAAEAAAABAP3/AwABAAEAAAACAP7/AwACAAEAAAACAP//AwACAAEAAAACAAAAAwACAAEAAAD+//7/AwABAAIAAAD+//3/AwAAAAAAAAD///3/AwABAAAAAAAAAP7/AwABAAEAAAAAAP3/AwABAAEAAAD+/wAAAwAAAAEAAAD+/wEAAwAAAAEAAAD+/wIAAwAAAAIAAAAAAPz/AwAAAAAAAAACAAEAAwACAAIAAAABAAEAAwABAAEAAAACAP3/AwACAAEAAAACAPz/AwACAAAAAAABAPz/AwABAAAAAAAGAAIAAwABAAEAAAAGAAMAAwABAAEAAAAHAAQAAwABAAEAAAAHAAUAAwABAAEAAAAHAAMAAwABAAEAAAAHAAIAAwABAAEAAAAHAAEAAwABAAAAAAAIAAMAAwABAAEAAAAJAAQAAwABAAEAAAAJAAMAAwABAAEAAAAJAAIAAwABAAEAAAAIAAIAAwABAAEAAAAIAAEAAwABAAAAAAAIAAQAAwABAAEAAAAIAAUAAwABAAEAAAAHAAYAAwAAAAIAAAAGAAUAAwAAAAIAAAAGAAQAAwAAAAEAAAAJAAUAAwABAAIAAAAGAAEAAwAAAAAAAAAJAAEAAwACAAAAAAAKAAIAAwACAAAAAAAKAAMAAwACAAEAAAAKAAQAAwACAAEAAAAKAAUAAwACAAIAAAAFAAMAAwAAAAIAAAAFAAIAAwAAAAEAAAAIAAYAAwACAAIAAAABAAIAAwACAAIAAAA=")
tile_set = SubResource("TileSet_u5sy4")

[node name="Player" parent="." unique_id=1560408430 instance=ExtResource("5_44saj")]
collision_mask = 3
motion_mode = 0

[node name="Camera2D" type="Camera2D" parent="." unique_id=1471568816]
z_index = 12
ignore_rotation = false
zoom = Vector2(1.5, 1.5)
limit_enabled = false
position_smoothing_speed = 1.0
script = ExtResource("6_7mbro")

[node name="ColorRect" type="ColorRect" parent="Camera2D" unique_id=1956440988]
z_index = -20
material = SubResource("ShaderMaterial_ff6ho")
offset_left = -486.00003
offset_top = -378.0
offset_right = -458.45053
offset_bottom = -351.41986
scale = Vector2(36.261993, 30.586773)
color = Color(0, 0, 0, 1)

[node name="Filter" type="ColorRect" parent="Camera2D" unique_id=12013226]
z_index = 999
z_as_relative = false
material = SubResource("ShaderMaterial_ghpyy")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -650.0
offset_top = -463.0
offset_right = -530.0
offset_bottom = -343.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(10.650343, 7.994728)

[node name="Boundary" parent="." unique_id=1171336177 instance=ExtResource("7_ff6ho")]

[node name="SubViewport" type="SubViewport" parent="." unique_id=300834478]
render_target_clear_mode = 2

[node name="Sprite2D" type="Sprite2D" parent="SubViewport" unique_id=767575175]
texture_filter = 1
position = Vector2(-200, -200)
texture = ExtResource("8_7yos8")

[node name="Canvas" type="TextureRect" parent="." unique_id=1328037387]
z_index = -2
material = SubResource("ShaderMaterial_excbq")
offset_left = -245.0
offset_top = -150.0
offset_right = 267.0
offset_bottom = 362.0
texture = SubResource("ViewportTexture_ir15t")

[node name="Bomb" parent="." unique_id=505332239 instance=ExtResource("10_yk7ts")]
position = Vector2(23, 22)

[node name="Prism" parent="." unique_id=1103573432 instance=ExtResource("12_44saj")]
position = Vector2(136, 72)

[node name="MusicController" parent="." unique_id=1508636125 instance=ExtResource("13_44saj")]

[node name="Label" type="Label" parent="." unique_id=1694476205]
offset_right = 40.0
offset_bottom = 23.0

[connection signal="world_flip" from="." to="Player" method="_on_world_world_flip"]
